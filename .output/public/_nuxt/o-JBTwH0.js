import{D as g,_ as h,a as y,h as b,E as x}from"./CeKpuJBb.js";import{j as z,r as l,c as m,a as t,b as c,l as P,t as w,o as p,_ as D}from"./CpoV5vGA.js";const E={class:"page-container"},V={class:"btn-area"},k=["disabled"],L={key:0,class:"results"},B={id:"pdf-area"},C=z({__name:"analyze",setup(N){const s=l(""),o=l(null),d=l(null),n=l(!1);async function f(){if(!s.value||s.value.trim().length<5){alert("SubÃ­ un archivo Panic Log vÃ¡lido.");return}n.value=!0;try{const e=await $fetch("/api/parse",{method:"POST",body:{text:s.value}});if(!e.success){alert(e.error||"Error analizando el Panic Log."),n.value=!1;return}o.value=e.data.grouped,d.value=e.data.summary}catch(e){console.error(e),alert("Error en el servidor al procesar el Panic Log.")}finally{n.value=!1}}async function v(){const e=document.getElementById("pdf-area");if(!e)return;const a=await b(e),r=a.toDataURL("image/png"),i=new x("p","mm","a4"),u=i.internal.pageSize.getWidth(),_=a.height*u/a.width;i.addImage(r,"PNG",0,0,u,_),i.save("panic_report.pdf")}return(e,a)=>(p(),m("div",E,[a[2]||(a[2]=t("h1",{class:"title"}," AnÃ¡lisis de Panic Log ",-1)),c(g,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r)},null,8,["modelValue"]),t("div",V,[t("button",{class:"analyze-btn",disabled:n.value,onClick:f},w(n.value?"Analizando...":"Analizar"),9,k)]),o.value?(p(),m("div",L,[t("div",{class:"flex justify-between items-center mb-6"},[a[1]||(a[1]=t("h2",{class:"text-2xl font-bold text-white"},"Resultados del anÃ¡lisis",-1)),t("button",{class:"export-btn",onClick:v}," ðŸ“„ Exportar PDF ")]),t("div",B,[c(h,{summary:d.value},null,8,["summary"]),c(y,{grouped:o.value},null,8,["grouped"])])])):P("",!0)]))}}),I=D(C,[["__scopeId","data-v-25f812e2"]]);export{I as default};
